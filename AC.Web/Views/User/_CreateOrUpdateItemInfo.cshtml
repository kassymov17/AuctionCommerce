@model ItemModel
@using AC.Web.Models.Catalog
@using AC.Services.Catalog;
@using System.Text;
@using AC.Core.Domain.Catalog
@using AC.Services;
@using AC.Services.Users;

@{
    Html.AppendCssFileParts("~/Content/tagEditor/jquery.tag-editor.css");
    Html.AppendScriptParts("~/Scripts/tagEditor/jquery.tag-editor.min.js");
    Html.AppendScriptParts("~/Scripts/tagEditor/jquery.caret.min.js");
}

<script type="text/javascript">
    $(document).ready(function() {
        $("#@Html.FieldIdFor(model => model.ItemTypeId)").change(toggleItemType);

        toggleItemType();

        function toggleItemType() {
            var selectedItemTypeId = $("#@Html.FieldIdFor(model => model.ItemTypeId)").val();
            if (!selectedItemTypeId || selectedItemTypeId == @(((int) ItemType.ShopItem).ToString())) {
                $("#pnlAuctionStartDate").hide();
                $("#pnlAuctionEndDate").hide();
                $("#pnlAuctionPrice").hide();
                $("#pnlShopPrice").show();
            } else if (selectedItemTypeId == @(((int) ItemType.AuctionItem).ToString())) {
                $("#pnlAuctionStartDate").show();
                $("#pnlAuctionEndDate").show();
                $("#pnlAuctionPrice").show();
                $("#pnlShopPrice").hide();
            }
        }
    });
</script>

<div class="raw clearfix">
    <div class="col-md-7">
        <div panel="panel-group">
            <div class="panel panel-default">
                <div class="panel-heading">
                    Общая информация
                </div>
                <div class="panel-body">
                    @if (Model.Id > 0)
                    {
                        <div class="form-group advanced-setting">
                            <div class="col-md-3">
                                @Html.ACLabelFor(model => model.Id)
                            </div>
                            <div class="col-md-9">
                                @Html.ACDisplayFor(model => model.Id)
                                @Html.ValidationMessageFor(model => model.Id)
                            </div>
                        </div>
                    }
                    <div class="form-group advanced-setting">
                        <div class="col-md-3">
                            @Html.ACLabelFor(model => model.ItemTypeId)
                        </div>
                        <div class="col-md-9">
                            @Html.ACDropDownListFor(model => model.ItemTypeId, ((ItemType)Model.ItemTypeId).ToSelectList())
                            @Html.ValidationMessageFor(model => model.ItemTypeId)
                        </div>
                    </div>
                    <div class="form-group">
                        <div class="col-md-3">
                            @Html.ACLabelFor(model => model.Name)
                        </div>
                        <div class="col-md-9">
                            @Html.ACEditorFor(model => model.Name)
                            @Html.ValidationMessageFor(model => model.Name)
                        </div>
                    </div>
                    <div class="form-group">
                        <div class="col-md-3">
                            @Html.ACLabelFor(model => model.ShortDescription)
                        </div>
                        <div class="col-md-9">
                            @Html.ACTextAreaFor(model => model.ShortDescription)
                            @Html.ValidationMessageFor(model => model.ShortDescription)
                        </div>
                    </div>
                    <div class="form-group">
                        <div class="col-md-3">
                            @Html.ACLabelFor(model => model.FullDescription)
                        </div>
                        <div class="col-md-9">
                            @Html.ACTextAreaFor(model => model.FullDescription)
                            @Html.ValidationMessageFor(model => model.FullDescription)
                        </div>
                    </div>
                    <div class="form-group advanced-setting" id="pnlAuctionStartDate">
                        <div class="col-md-3">
                            @Html.ACLabelFor(model => model.AuctionStartDate)
                        </div>
                        <div class="col-md-9">
                            @Html.ACEditorFor(model => model.AuctionStartDate)
                            @Html.ValidationMessageFor(model => model.AuctionStartDate)
                        </div>
                    </div>
                    <div class="form-group advanced-setting" id="pnlAuctionEndDate">
                        <div class="col-md-3">
                            @Html.ACLabelFor(model => model.AuctionEndDate)
                        </div>
                        <div class="col-md-9">
                            @Html.ACEditorFor(model => model.AuctionEndDate)
                            @Html.ValidationMessageFor(model => model.AuctionEndDate)
                        </div>
                    </div>
                </div>
            </div>
            <div class="panel panel-default" id="group-prices">
                <div class="panel-heading">
                    @T("Admin.Catalog.Products.Prices")
                </div>
                <div class="panel-body">
                    <div class="form-group">
                        <div class="col-md-3" id="pnlAuctionPrice">
                            Стартовая цена
                        </div>
                        <div class="col-md-3" id="pnlShopPrice">
                            Цена
                        </div>
                        <div class="col-md-9">
                            @Html.ACEditorFor(model => model.InitialPrice) [Тенге]
                            @Html.ValidationMessageFor(model => model.InitialPrice)
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="col-md-5">
        <div class="panel-group">
            <div class="panel panel-default">
                <div class="panel-heading">
                    @T("Admin.Catalog.Products.Mappings")
                </div>
                <div class="panel-body">
                    <div class="col-md-4">
                        @Html.ACLabelFor(model => model.SelectedCategoryIds)
                    </div>
                    <div class="col-md-8">
                        @Html.EditorFor(model => model.SelectedCategoryIds, new { SelectList = Model.AvailableCategories })
                        <script>
                            $(document).ready(function() {
                                var categoryIdsInput = $('#@Html.FieldIdFor(model => model.SelectedCategoryIds)').data("kendoMultiSelect");
                                categoryIdsInput.setOptions({
                                    autoClose: false
                                });

                                @if (Model.AvailableCategories.Count == 0)
                                {
                                    <text>
                                        categoryIdsInput.setOptions({
                                            enable: false,
                                            placeholder: '@T("Admin.Catalog.Products.Fields.Categories.NoCategoriesAvailable")'
                                        });
                                        categoryIdsInput._placeholder();
                                        categoryIdsInput._enable();
                                    </text>
                                }
                            });
                        </script>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>